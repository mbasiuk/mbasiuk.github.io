<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <style>
        html,
        body {
            margin: 0;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            letter-spacing: 1.3px;
        }

        input {
            font-size: inherit;
            font-family: inherit;
            letter-spacing: inherit;
        }
    </style>
    <link rel="stylesheet" href="forms.css">

</head>

<body>
    <div class="card">
        <div class="background"></div>
        <h2>Sign Up</h2>
        <form action="/signup" method="post" onsubmit="return signUp();">
            <label>
                <span>Email or Phone:</span>
                <input id="user" name="user" type="text" placeholder="email or phone" autocomplete="username"
                    autocapitalize="none" spellcheck="false" autofocus="autofocus">
            </label>
            <label>
                <span>Password:</span>
                <input id="password" name="password" autocomplete="new-password" type="password" placeholder="password">
            </label>

            <input type="submit">

        </form>
    </div>
</body>
<script>
    function signUp() {
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/signup", true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.setRequestHeader("tid", crypto.randomUUID());
        xhr.onreadystatechange = singUpCallback;
        xhr.send(JSON.stringify({
            user: document.getElementById("user").value,
            password: document.getElementById("password").value
        }));
        return false;
    }

    function singUpCallback() {
        if (this.readyState < 4) {
            return;
        }
        if (this.status == 200) {
            console.log("OK");
        } else {
            console.error("Error");
        }
    }
</script>

</html>